<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/header :: head('Login ou Cadastro')}"></head>

<body th:data-show-cadastro="${showCadastro}">

<button id="theme-toggle-btn" class="btn btn-outline-secondary theme-toggle-auth" type="button">
    <i class="bi bi-moon-fill" id="theme-toggle-icon-dark"></i>
    <i class="bi bi-sun-fill" id="theme-toggle-icon-light" style="display: none;"></i>
</button>

<div class="container-fluid vh-100 d-flex align-items-center justify-content-center">
    <div class="row auth-container">
        
        <div class="col-md-6 auth-form-col">

            <div th:if="${errorMessage}" class="alert alert-danger text-center rounded-pill mb-4 fade-in" role="alert">
                <span th:text="${errorMessage}"></span>
            </div>
            <div th:if="${param.error}" class="alert alert-danger text-center rounded-pill mb-4 fade-in" role="alert">
                Email ou senha inválidos.
            </div>
            <div th:if="${param.success}" class="alert alert-success text-center rounded-pill mb-4 fade-in" role="alert">
                Cadastro realizado com sucesso! Faça o login abaixo.
            </div>
            <div th:if="${param.logout}" class="alert alert-success text-center rounded-pill mb-4 fade-in" role="alert">
                Você foi desconectado com segurança.
            </div>

            <div class="text-center mb-4">
                <img th:src="@{/img/logo.png}" alt="Logo TaskManaging" class="auth-logo" />
            </div>

            <div class="d-flex justify-content-center mb-4">
                <h3 id="btn-login" class="auth-tab active-tab">Log In</h3>
                <h3 id="btn-cadastro" class="auth-tab ms-4">Criar conta</h3>
            </div>

            <form id="form-login" class="auth-form" th:action="@{/login}" method="post">
                <h5 class="mb-3 text-secondary">Entre com seus dados</h5>
                <div class="mb-3">
                    <input type="email" name="username" class="form-control form-control-lg rounded-pill"
                           placeholder="Email" required>
                </div>
                <div class="mb-3 position-relative">
                    <input type="password" id="password-login" name="password"
                           class="form-control form-control-lg rounded-pill pe-5"
                           placeholder="Senha" required>
                    <i class="bi bi-eye position-absolute top-50 end-0 translate-middle-y me-3 toggle-password"
                       data-target="password-login"></i>
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary rounded-pill py-2">Entrar</button>
                </div>
                <p class="text-center mt-3">
                    <a href="#" class="text-muted small">Esqueceu a senha?</a>
                </p>
            </form>

            <form id="form-cadastro" class="auth-form" th:action="@{/cadastro}" th:object="${usuario}" method="post" style="display:none;">
                <h5 class="mb-3 text-secondary">Crie sua conta</h5>
                <div class="mb-3">
                    <input type="text" th:field="*{nome}" class="form-control form-control-lg rounded-pill"
                           placeholder="Nome" required>
                </div>
                <div class="mb-3">
                    <input type="email" th:field="*{email}" class="form-control form-control-lg rounded-pill"
                           placeholder="Email" required>
                </div>
                <div class="mb-3 position-relative">
                    <input type="password" id="senha" th:field="*{senha}"
                           class="form-control form-control-lg rounded-pill pe-5"
                           placeholder="Senha" required>
                    <i class="bi bi-eye position-absolute top-50 end-0 translate-middle-y me-3 toggle-password"
                       data-target="senha"></i>
                </div>
                <div class="mb-3 position-relative">
                    <input type="password" id="confirmarSenha"
                           class="form-control form-control-lg rounded-pill pe-5"
                           placeholder="Confirmar senha" required>
                    <i class="bi bi-eye position-absolute top-50 end-0 translate-middle-y me-3 toggle-password"
                       data-target="confirmarSenha"></i>
                    <small id="erroSenha" class="text-danger mt-1" style="display:none;">
                        As senhas não coincidem
                    </small>
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary rounded-pill py-2">Cadastrar</button>
                </div>
            </form>
        </div>

        <div class="col-md-6 auth-info-col">
            <h3 class="fw-bold mb-4">TaskManaging</h3>
            <p class="fs-5 text-secondary">
                O site de organização pessoal<br>focado em estudantes com TDAH.
            </p>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: scripts}"></div>
</body>
</html>